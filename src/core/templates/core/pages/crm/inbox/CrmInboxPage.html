{% extends 'core/pages/crm/extends/CrmBase.html' %} 
{% load static %}

{% block head_stylesheets %}{% endblock head_stylesheets %}

{% block crm_content %}
<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
    <!--begin::Content-->
    <div class="content flex-column-fluid" id="kt_content">
      <!--begin::Toolbar-->
      <div class="toolbar d-flex flex-stack flex-wrap mb-5 mb-lg-7" id="kt_toolbar">
        <!--begin::Page title-->
        <div class="page-title d-flex flex-column py-1">
          <!--begin::Title-->
          <h1 class="d-flex align-items-center my-1">
            <span class="text-dark fw-bold fs-1">
                Skrzynka odbiorcza
                /
                <a href="{% url "admin:core_mailingreplymessage_changelist" %}">
                    CMS
                </a>
            </span>
          </h1>
          <!--end::Title-->
        </div>
        <!--end::Page title-->
      </div>
      <!--end::Toolbar-->
      <!--begin::Post-->
      <div class="post" id="kt_post">
        <!--begin::Inbox App - Messages -->
        <div class="d-flex flex-column flex-lg-row">
          <!--begin::Sidebar-->
          <div class="d-none d-lg-flex flex-column flex-lg-row-auto w-100 w-lg-275px" data-kt-drawer="true" data-kt-drawer-name="inbox-aside" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="225px" data-kt-drawer-direction="start" data-kt-drawer-toggle="#kt_inbox_aside_toggle">
            <!--begin::Sticky aside-->
            <div class="card card-flush mb-0" data-kt-sticky="false" data-kt-sticky-name="inbox-aside-sticky" data-kt-sticky-offset="{default: false, xl: '100px'}" data-kt-sticky-width="{lg: '275px'}" data-kt-sticky-left="auto" data-kt-sticky-top="100px" data-kt-sticky-animation="false" data-kt-sticky-zindex="95">
              <!--begin::Aside content-->
              <div class="card-body">
                <!--begin::Menu-->
                <div class="menu menu-column menu-rounded menu-state-bg menu-state-title-primary menu-state-icon-primary menu-state-bullet-primary mb-10">
                  <!--begin::Menu item-->
                  <div class="menu-item mb-3">
                    <!--begin::Inbox-->
                    <span class="menu-link active">
                    <span class="menu-icon">
                    <i class="ki-duotone ki-sms fs-2 me-3">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    </i>
                    </span>
                    <span class="menu-title fw-bold">Wszystkie</span>
                    <span class="badge badge-light-success">{{all_emails_count}}</span>
                    </span>
                    <!--end::Inbox-->
                    <!--begin::Inbox-->
                    <span class="menu-link">
                    <span class="menu-icon">
                    <i class="ki-duotone ki-sms fs-2 me-3">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    </i>
                    </span>
                    <span class="menu-title fw-bold">Agresor</span>
                    <span class="badge badge-light-success">X</span>
                    </span>
                    <!--end::Inbox-->
                    <!--begin::Inbox-->
                    <span class="menu-link">
                    <span class="menu-icon">
                    <i class="ki-duotone ki-sms fs-2 me-3">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    </i>
                    </span>
                    <span class="menu-title fw-bold">Urlop</span>
                    <span class="badge badge-light-success">X</span>
                    </span>
                    <!--end::Inbox-->
                    <!--begin::Inbox-->
                    <span class="menu-link">
                    <span class="menu-icon">
                    <i class="ki-duotone ki-sms fs-2 me-3">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    </i>
                    </span>
                    <span class="menu-title fw-bold">Zmiana maila</span>
                    <span class="badge badge-light-success">X</span>
                    </span>
                    <!--end::Inbox-->
                  </div>
                  <!--end::Menu item-->
                </div>
                <!--end::Menu-->
              </div>
              <!--end::Aside content-->
            </div>
            <!--end::Sticky aside-->
          </div>
          <!--end::Sidebar-->
          <!--begin::Content-->
          <div class="flex-lg-row-fluid ms-lg-7 ms-xl-10">
            <!--begin::Card-->
            <div class="card">
              <div class="card-header align-items-center py-5 gap-2 gap-md-5">
                <!--begin::Actions-->
                <div class="d-flex flex-wrap gap-2">
                  
                </div>
                <!--end::Actions-->
                <!--begin::Actions-->
                <div class="d-flex align-items-center flex-wrap gap-2">
                  <!--begin::Search-->
                  <div class="d-flex align-items-center position-relative">
                    <i class="ki-duotone ki-magnifier fs-3 position-absolute ms-4">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    </i>
                    <input type="text" data-kt-inbox-listing-filter="search" class="form-control form-control-sm form-control-solid mw-100 min-w-125px min-w-lg-150px min-w-xxl-200px ps-11" placeholder="Search inbox">
                  </div>
                  <!--end::Search-->
                  <!--begin::Toggle-->
                  <a href="#" class="btn btn-sm btn-icon btn-color-primary btn-light btn-active-light-primary d-lg-none" data-bs-toggle="tooltip" data-bs-dismiss="click" data-bs-placement="top" id="kt_inbox_aside_toggle" aria-label="Toggle inbox menu" data-bs-original-title="Toggle inbox menu" data-kt-initialized="1">
                  <i class="ki-duotone ki-burger-menu-2 fs-3 m-0">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                  <span class="path4"></span>
                  <span class="path5"></span>
                  <span class="path6"></span>
                  <span class="path7"></span>
                  <span class="path8"></span>
                  <span class="path9"></span>
                  <span class="path10"></span>
                  </i>
                  </a>
                  <!--end::Toggle-->
                </div>
                <!--end::Actions-->
              </div>
              <div class="card-body p-0">
                <!--begin::Table-->
                <div id="kt_inbox_listing_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                  <div class="table-responsive">
                    <table class="table table-hover table-row-dashed fs-6 gy-5 my-0 dataTable no-footer" id="kt_inbox_listing">
                      <tbody>
                        {% for message in messages %}
                        <tr class="{% cycle 'odd' 'even' %}">
                          <td class="ps-9">
                            <div class="text-dark">
                              <!--begin::Heading-->
                              <a href="{% url "core:crm_inbox_message_page" email_id=message.email_id %}" target="_blank" class="text-dark">
                                <span class="fw-bold">
                                    {{message.subject}}
                                </span>
                            </a>
                            <br>
                            <span class="fs-9">OD: {{message.from_email}}</span>
                            <span class="fs-9">/</span>
                            <span class="fs-9">DO: {{message.to_email}}</span>
                              <!--end::Heading-->
                            </div>
                            <!--begin::Badges-->
                            {% if message.is_aggressor %}
                                <div class="badge badge-danger">AGRESOR</div>
                            {% endif %}
                            {% if message.is_vacation %}
                                <div class="badge badge-primary">Urlop</div>
                            {% endif %}
                            {% if message.is_email_change %}
                                <div class="badge badge-warning">Zmiana adresu</div>
                            {% endif %}
                            <!--end::Badges-->
                          </td>
                          <td class="w-100px text-end fs-9 pe-9">
                            <span class="fw-semibold">
                                {{message.created_at|date:"j E Y H:i"}}
                            </span>
                          </td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                  <div class="row px-9 pt-3 pb-5">
                    <div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start">
                      <div class="dataTables_length" id="kt_inbox_listing_length">
                        <label>
                          <select name="kt_inbox_listing_length" aria-controls="kt_inbox_listing" class="form-select form-select-sm form-select-solid">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                          </select>
                        </label>
                      </div>
                    </div>
                    <div class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end">
                      <div class="dataTables_paginate paging_simple_numbers" id="kt_inbox_listing_paginate">
                        <ul class="pagination">
                          <li class="paginate_button page-item previous disabled" id="kt_inbox_listing_previous"><a href="#" aria-controls="kt_inbox_listing" data-dt-idx="0" tabindex="0" class="page-link"><i class="previous"></i></a></li>
                          <li class="paginate_button page-item active"><a href="#" aria-controls="kt_inbox_listing" data-dt-idx="1" tabindex="0" class="page-link">1</a></li>
                          <li class="paginate_button page-item "><a href="#" aria-controls="kt_inbox_listing" data-dt-idx="2" tabindex="0" class="page-link">2</a></li>
                          <li class="paginate_button page-item next" id="kt_inbox_listing_next"><a href="#" aria-controls="kt_inbox_listing" data-dt-idx="3" tabindex="0" class="page-link"><i class="next"></i></a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
                <!--end::Table-->
              </div>
            </div>
            <!--end::Card-->
          </div>
          <!--end::Content-->
        </div>
        <!--end::Inbox App - Messages -->
      </div>
      <!--end::Post-->
    </div>
    <!--end::Content-->
  </div>
{% endblock crm_content %}

{% block body_scripts %}{% endblock body_scripts %}
